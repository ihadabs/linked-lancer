<link href="css/admin.css" rel="stylesheet">

<div class="d-flex" id="wrapper">


  <div class="bg-light border-right" id="sidebar-wrapper">
    <div class="sidebar-heading">Admin Dashboard<br><b>Hello <%= user["AccountName"] %></b></div>
    <div class="list-group list-group-flush">
      <a href="#" class="list-group-item list-group-item-action bg-light " id="Dashboard-nav">Dashboard</a>
      <a href="#" class="list-group-item list-group-item-action bg-light" id="Profiles-nav">Accounts</a>
      <a href="#" class="list-group-item list-group-item-action bg-light" id="Projects-nav">Projects</a>
      <a href="/logout" class="list-group-item list-group-item-action bg-light">Logout</a>

    </div>
  </div>


  <div id="page-content-wrapper" class="mx-auto align-items-center">

    <!-- <button class="btn btn-primary" id="menu-toggle">Toggle Menu</button> -->
    <div id="Dashboard" class="container nav-page">
      <div id="numbers" class="container mx-auto align-items-center">
        <div class="card-deck ">
          <div class="card text-center ">
            <img class="card-img-top " src="images/user-icon.png" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title"><%= accounts.length %></h5>
              <p class="card-text">Accounts in the Database</p>
            </div>
          </div>
          <div class="card text-center">
            <img class="card-img-top" src="images/project-icon.webp" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title"><%= allprojects.length %></h5>
              <p class="card-text">Projects in the Database</p>

            </div>
          </div>
        </div>


      </div>


    </div>
    <div id="Projects" class="container nav-page">
      <div class="container">
        <div class="container">
          <table class="table table-bordered" id="projectTable" width="100%" cellspacing="0">
            <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Budget</th>
              <th>Status</th>
              <th>Employer</th>
              <th>Freelancer</th>
            </tr>
            </thead>
            <tfoot>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Budget</th>
              <th>Status</th>
              <th>Employer</th>
              <th>Freelancer</th>
            </tr>
            </tfoot>
            <tbody>
            <% for(var i = 0; i < allprojects.length; i++) { %>
              <tr>
                <td><%= allprojects[i]["ProjectID"] %></td>
                <td><%= allprojects[i]["ProjectName"] %></td>
                <td><%= allprojects[i]["ProjectBudget"] %></td>
                <td><%= allprojects[i]["ProjectStatus"] == 0 ? "In Progress" : "Waiting for Freelancer" %></td>
                <td>
                  <a href="mailto:<%= allprojects[i]["AccountEmail"] %>">Contact<br><%= allprojects[i]["AccountName"] %>
                  </a></td>
                <td>
                  <% if (allprojects[i]["FreelancerID"] === 0) { %>
                    Not Assigned!
                  <% } else { %>
                    <a href="mailto:<%= allprojects[i]["FreelancerEmail"] %>">Contact<br><%= allprojects[i]["FreelancerName"] %>
                    </a>
                  <% } %>
                </td>

              </tr>
            <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div id="Profiles" class="container nav-page">
      <div class="container">
        <div class="container">
          <table class="table table-bordered" id="profileTable" width="100%" cellspacing="0">
            <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
            </tr>
            </thead>
            <tfoot>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
            </tr>
            </tfoot>
            <tbody>
            <% for(var i = 0; i < accounts.length; i++) { %>
              <tr>
                <td><%= accounts[i]["AccountID"] %></td>
                <td><%= accounts[i]["AccountName"] %></td>
                <td><%= accounts[i]["AccountEmail"] %></td>
                <td><%= accounts[i]["TypeDescription"] %></td>
              </tr>
            <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div id="Reports" class="container nav-page"></div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
            integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
            integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>
    <link href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css" rel="stylesheet">

    <script>


      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });
    </script>
    <!-- table  -->
    <script>
      $("#Accounts").hide();
      $("#Projects").hide();
      $("#Profiles").hide();
      $("#Reports").hide();

      $(document).ready(function () {
        $('#accountTable').DataTable();
        $('#projectTable').DataTable();
        $('#profileTable').DataTable();
        $("#Accounts").hide();
        $("#Projects").hide();
        $("#Profiles").hide();
        $("#Reports").hide();


      });
      $("#Dashboard-nav").click(function () {
        $("#Dashboard").show();
        $("#Accounts").hide();
        $("#Projects").hide();
        $("#Profiles").hide();
        $("#Reports").hide();
      });
      $("#Accounts-nav").click(function () {
        $("#Dashboard").hide();
        $("#Accounts").show();
        $("#Projects").hide();
        $("#Profiles").hide();
        $("#Reports").hide();
      });

      $("#Projects-nav").click(function () {
        $("#Dashboard").hide();
        $("#Accounts").hide();
        $("#Projects").show();
        $("#Profiles").hide();
        $("#Reports").hide();
      });
      $("#Profiles-nav").click(function () {
        $("#Dashboard").hide();
        $("#Accounts").hide();
        $("#Projects").hide();
        $("#Profiles").show();
        $("#Reports").hide();
      });
      $("#Reports-nav").click(function () {
        $("#Dashboard").hide();
        $("#Accounts").hide();
        $("#Projects").hide();
        $("#Profiles").hide();
        $("#Reports").show();
      });

    </script>
  </div>
